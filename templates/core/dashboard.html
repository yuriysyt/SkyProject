{% extends 'core/base.html' %}
{% block content %}
<div class='row'>
    <div class='col-md-8'>
        <div class='card'>
            <div class='card-header'>
                <h2>Dashboard</h2>
            </div>
            <div class='card-body'>
                {% if latest_session %}
                <div class='alert alert-info'>
                    Latest Health Check Session: {{ latest_session.name }} ({{ latest_session.date }})
                </div>
                
                {% if user_votes %}
                <h3>Your Votes</h3>
                <div class='list-group'>
                    {% for vote in user_votes %}
                    <div class='list-group-item'>
                        <h5>{{ vote.card.name }}</h5>
                        <span class='badge bg-{% if vote.value == 'green' %}success{% elif vote.value == 'amber' %}warning{% else %}danger{% endif %}'>
                            {{ vote.get_value_display }}
                        </span>
                        {% if vote.comment %}
                        <p class='mt-2'>{{ vote.comment }}</p>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class='alert alert-warning'>
                    You haven't voted in the latest session yet.
                </div>
                {% if cards %}
                <div class='mt-3'>
                    <a href='#' class='btn btn-primary'>Submit Votes</a>
                </div>
                {% endif %}
                {% endif %}
                
                {% else %}
                <div class='alert alert-warning'>
                    No active health check session.
                </div>
                {% endif %}
                
                <div class='mt-4'>
                    <h3>Analytics</h3>
                    <div class='list-group'>
                        <a href='{% url 'progress_chart' %}' class='list-group-item list-group-item-action'>
                            <div class='d-flex w-100 justify-content-between'>
                                <h5 class='mb-1'>Team Progress Chart</h5>
                                <small class='text-muted'>View trend</small>
                            </div>
                            <p class='mb-1'>View your team's health check progress over time</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class='col-md-4'>
        <div class='card'>
            <div class='card-header'>
                <h2>Team Info</h2>
            </div>
            <div class='card-body'>
                {% if user_team %}
                <h5>{{ user_team.name }}</h5>
                <p>Department: {{ user_team.department.name }}</p>
                
                <h6>Team Members</h6>
                <ul class='list-group'>
                    {% for member in team_members %}
                    <li class='list-group-item'>
                        {{ member.get_full_name|default:member.username }}
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class='alert alert-warning'>
                    You are not assigned to a team.
                </div>
                <a href='{% url 'profile' %}' class='btn btn-primary'>Update Profile</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
